Project Gistalk {
  database_type: 'PostgreSQL'
  Note: '''
    # Gistalk
    A database for storing the Gistalk project. 
    [Github](https://github.com/gsainfoteam/gistalk-be)
  '''
}

Enum Semester {
  SPRING
  SUMMER
  FALL
  WINTER
  ALL
}

Enum Recommendation {
  YES
  NO
  MAYBE
}

Table User {
  uuid uuid [pk]
  name varchar
  consent boolean
  created_at datetime
}

Table TakingLectures {
  user_uuid uuid [ref: > User.uuid]
  lecture_id int [ref: > Lecture.id]
  section_id int [ref: - LectureSection.id]

  Indexes {
    (user_uuid, lecture_id, section_id) [pk]
  }
}

Table Professor {
  id int [pk, increment]
  name varchar
}

Table LectureCode {
  code varchar [pk]

  lecture_id int [ref: > Lecture.id]
}

Table Lecture {
  id int [pk, increment]
  name varchar 
}

Table LectureSection {
  id int [pk, increment]
  lecture_id int [ref: > Lecture.id]
}

Table LectureSectionProfessor {
  section_id int [ref: - LectureSection.id]
  professor_id int [ref: > Professor.id]

  Indexes {
    (section_id, professor_id) [pk]
  }
}

Table Record {
  id int [pk, increment]

  difficulty int
  skill int
  helpfulness int
  interest int
  load int
  generosity int

  review varchar

  recommendation Recommendation
  semester Semester
  year int

  created_at datetime
}

Table RecordProfessor {
  record_id int [ref: > Record.id]
  user_uuid uuid [ref: > User.userUuid]
  lecture_id int [ref: > Lecture.id]
  section_id int [ref: LectureSectionProfessor.section_id]
  professor_id int [ref: LectureSectionProfessor.professor_id]

  Indexes {
    (record_id, user_uuid, lecture_id, section_id, professor_id) [pk]
  }
}

